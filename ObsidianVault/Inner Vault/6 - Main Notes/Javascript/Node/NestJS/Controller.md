
#NestJS

Very similar to Spring, it requires a decorator `@Controller()` for it to work properly. It also has decorators for each HTTP Verb:

```typescript
@Controller()
class AppController {
  @Get()
  getRootRoute() {
    return "Hello World!";
  }
}
```

Just like any Rest controller annotation from Spring, the methods and controllers decorators also can receive a route to work with:

```typescript
@Get('/new-route')
```

Can be generated by the Nest CLI with the command

`nest generate controller <name>`

If there is an already created folder, it is necessary to change the command so it does no conflict:

`nest generate controller <folder>/<class name> --flat`

The --flat does not create an extra folder called controllers.

### Routing

#### Params

We can use another decorator called @Param('name') for accessing routing variables

```typescript 
// /messages/5
@Param('id') // will give access to id which is 5
```

Ex:
```typescript
@Get('/:id')
  getMessage(@Param('id') id: string) {
    return `Message ${id}`;
  }
```

#### Query

To access query params, there's a decorator called @Query

```typescript
// /messages/5?validate=true
@Query('validate') // will give access to validate which is true
```

#### Headers

For headers, we can use the decorator @Headers()

#### Body

On requests that requires body, we can access through the decorator @Body()

```typescript
@Post()
  createMessage(@Body() body: any) {
    return body;
  }
```

### Handling Exceptions

Nest has a few embedded exceptions on its lib. The most famous one is the NotFoundException, but many others can be found and they are responsible for not only returning something but also changing the status code:

```typescript
import {
  Body,
  Controller,
  Get,
  Param,
  Post,
  NotFoundException,
} from '@nestjs/common';
//....

@Get('/:id')
  async getMessage(@Param('id') id: string) {
    const message = await this.messagesService.findOne(id);

    if (!message) {
      throw new NotFoundException('Message not found');
    }

    return message;
  }
```


